# Relatório — Correção de Drift do Poetry

Status: CONCLUÍDO

## Metadados
- Commit: ca5901a
- Data/Hora: 2025-11-16T14:18:31-03:00

## Estado final do ambiente
- Poetry: Poetry (version 1.8.3)
- Plugin export:    - poetry-plugin-export (1.6.0) Poetry plugin to export the dependencies to various formats       1 application plugin        Dependencies         - poetry (>=1.6.0,<2.0.0)         - poetry-core (>=1.7.0,<2.0.0) 
- Cabeçalho do poetry.lock: # This file is automatically @generated by Poetry 1.8.3 and should not be changed by hand.

## Ações executadas
1) Ajuste de versão do Poetry (user scope)
   - Instalado via instalador oficial em ~/.local/bin: 1.8.3
   - Plugin instalado: poetry-plugin-export==1.6.0 (compatível com Poetry 1.x)
2) Regeneração do lock sem atualizar versões
   - Comando: poetry lock --no-update
   - Instalação: poetry install --with dev --sync --no-interaction --no-ansi
3) Export de requirements (para SCA)
   - "poetry export --format=requirements.txt --with dev --without-hashes -o artifacts/security/requirements.txt"
4) Validações
   - Backend: ruff/pytest OK
   - Frontend: pnpm test OK
   - Docs gate: OK

## Guardrails aplicados
- Pre-commit: verificação do cabeçalho do lock
  - Hook: poetry-lock-guard
  - Arquivos: .pre-commit-config.yaml:1, scripts/ci/check-poetry-lock-header.sh:1
- CI (GitHub Actions): step fail-fast
  - Workflow atualizado: .github/workflows/frontend-foundation.yml (três etapas com verificação do header)

## Evidências
- Requirements exportados: artifacts/security/requirements.txt:1
- Cabeçalho do lock: poetry.lock:1 (gerado por Poetry 1.8.3)
- Hook script: scripts/ci/check-poetry-lock-header.sh:1
- Config pre-commit: .pre-commit-config.yaml:1
- Workflow CI: .github/workflows/frontend-foundation.yml:1

